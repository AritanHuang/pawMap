import{S as c}from"./bootstrap.min-361b4cd4.js";import{a as i,b as u}from"./axios-4008c28b.js";import{a as m}from"./validate-7b99de5a.js";const s=document.querySelector("#login-email"),a=document.querySelector("#login-password"),d=document.querySelector("#btn-login");d.addEventListener("click",function(e){e.preventDefault(),p()});function p(){const e=document.querySelector("#login-form"),t={帳號:{presence:{message:"為必填欄位"},email:{message:"格式錯誤"}},密碼:{presence:{message:"為必填欄位"},length:{minimum:6,message:"至少六個字元"}}},o=document.querySelectorAll("input[type=email],input[type=password]"),n=m.validate(e,t);o.forEach(l=>{l.nextElementSibling.textContent=""}),n?Object.keys(n).forEach(r=>{document.querySelector(`#${r}`).textContent=n[r]}):g()}function g(){i.post(`${u}/login`,{email:s.value,password:a.value}).then(e=>{const t=e.data.accessToken,o=e.data.user.id;localStorage.setItem("token",t),localStorage.setItem("userId",o),s.value="",a.value="",window.location.href="passport.html"}).catch(e=>{c.fire({icon:"error",title:"登入失敗!",text:"請確認您的登入資訊",footer:'<a href="signup.html">尚未註冊?</a>'}),s.value="",a.value=""})}
