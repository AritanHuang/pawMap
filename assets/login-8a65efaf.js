import"./bootstrap.min-1d37006c.js";import{a as r,b as i,S as u}from"./sweetalert2.all-dee922f7.js";import{a as m}from"./validate-7b615d3f.js";const l=document.querySelector("#login-email"),a=document.querySelector("#login-password"),g=document.querySelector("#btn-login");g.addEventListener("click",function(e){e.preventDefault(),p()});function p(){const e=document.querySelector("#login-form"),t={帳號:{presence:{message:"為必填欄位"},email:{message:"格式錯誤"}},密碼:{presence:{message:"為必填欄位"},length:{minimum:6,message:"至少六個字元"}}},c=document.querySelectorAll("input[type=email],input[type=password]"),o=m.validate(e,t);c.forEach(n=>{n.nextElementSibling.textContent=""}),o?Object.keys(o).forEach(s=>{document.querySelector(`#${s}`).textContent=o[s]}):d()}function d(){r.post(`${i}/login`,{email:l.value,password:a.value}).then(e=>{const t=e.data.accessToken;localStorage.setItem("token",t),u.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:1500}),l.value="",a.value=""}).catch(e=>{console.log(e)})}
