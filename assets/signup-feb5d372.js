import{S as c}from"./bootstrap.min-361b4cd4.js";import{a as u,b as S}from"./axios-4008c28b.js";import{v as f}from"./validate-7b99de5a.js";const q="a0461da17c62e537d08e30497baa2ddd0d56a826",i=document.querySelector("#Email"),p=document.querySelector("#Password"),l=document.querySelector("#petName"),m=document.querySelector("#petBreed"),d=document.querySelector("#petWeight"),y=document.querySelector("#petBirthday"),g=document.querySelector("#address"),h=document.querySelector("#petPhoto"),B=document.querySelector("#signup-btn");let v="",e={};h.addEventListener("change",function(n){const s=n.target.files[0],a=new FormData;a.append("image",s),a.append("album","dICFBxM"),u.post("https://api.imgur.com/3/image",a,{headers:{Authorization:`Bearer ${q}`,"Content-Type":"multipart/form-data"}}).then(t=>{v=t.data.data.link}).catch(t=>{console.log(t)})});B.addEventListener("click",n=>{n.preventDefault();const s=document.querySelector('input[name="petGender"]:checked').value,a=document.querySelector('input[name="isSpayed"]:checked').value;e.email=i.value,e.password=p.value,e.petName=l.value,e.petBreed=m.value,e.petWeight=d.value,e.petBirthday=y.value,e.address=g.value,e.petPhoto=v,e.petGender=s,e.isSpayed=a,b()});function b(){const n=document.querySelector("#sign-up-form"),s=document.querySelectorAll("input[type=text],input[type=password],input[type=email],input[type=date],input[type=file],input[type=number]"),t=f(n,{信箱:{presence:{message:"為必填欄位"},email:{message:"格式錯誤"}},密碼:{presence:{message:"為必填欄位"},length:{minimum:6,message:"至少六個字元"}},寵物名字:{presence:{message:"為必填欄位"}},寵物品種:{presence:{message:"為必填欄位"}},寵物體重:{presence:{message:"為必填欄位"}},寵物生日:{presence:{message:"為必填欄位"}},地址:{presence:{message:"為必填欄位"}},寵物圖片:{presence:{message:"為必填欄位"}}});s.forEach(function(r){r.nextElementSibling.textContent=""}),t?Object.keys(t).forEach(o=>{document.querySelector(`#${o}`).textContent=t[o]}):u.post(`${S}/users`,e).then(r=>{c.fire({icon:"success",title:"註冊成功",showConfirmButton:!1,timer:1500}),i.value="",p.value="",l.value="",h.value="",m.value="",d.value="",y.value="",g.value=""}).catch(r=>{c.fire({icon:"error",title:"Oops...",text:"請檢查資料是否有誤"})})}
