import{S as r,a as i,b as p,i as S}from"./axios-2d2df78c.js";import{u as f}from"./utils-77fb7ba4.js";let t={};const m=localStorage.getItem("userId");localStorage.getItem("token");function y(){i.get(`${p}/users/${m}`).then(function(a){t=a.data,b()}).catch(function(a){console.log(a)})}y();const g=document.querySelector("#petName"),v=document.querySelector("#petBreed"),q=document.querySelector("#petBirthday"),n=document.querySelector("#address"),s=document.querySelector("#petPhoto"),d=document.querySelector("#petWeight"),B=document.querySelector("#spayed"),l=document.querySelector("#notSpayed"),o=document.querySelector("#btn-editUserData");function b(){g.value=t.petName,v.value=t.petBreed,q.value=t.petBirthday,n.value=t.address,d.value=t.petWeight,t.isSpayed==="true"?(B.disabled=!0,l.disabled=!0):l.checked=!0}let h="";s.addEventListener("change",a=>{o.textContent="圖片上傳中",o.disabled=!0,f(a.target.files[0],S).then(e=>{h=e,o.textContent="修改",o.disabled=!1}).catch(e=>{console.log(e),r.fire("圖片上傳失敗，請稍候再試")})});o.addEventListener("click",function(a){a.preventDefault();let e={};const c=document.querySelector('input[name="isSpayed"]:checked').value;n.value!==t.address&&(e.address=n.value),s.value!==""&&(e.petPhoto=h),d.value!==t.petWeight&&(e.petWeight=d.value),c!==t.isSpayed&&(e.isSpayed=c),Object.keys(e).length>0?i.patch(`${p}/users/${m}`,e).then(u=>{r.fire("資料更新成功"),y(),s.value=""}).catch(u=>{console.log(u.response)}):r.fire("您並沒有更新任何資料")});
