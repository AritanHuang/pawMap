import{a as c,b as i,S as u}from"./axios-2d2df78c.js";import{a as m}from"./validate-8556d57d.js";const a=document.querySelector("#login-email"),s=document.querySelector("#login-password"),p=document.querySelector("#btn-login");p.addEventListener("click",function(e){e.preventDefault(),d()});function d(){const e=document.querySelector("#login-form"),o={帳號:{presence:{message:"為必填欄位"},email:{message:"格式錯誤"}},密碼:{presence:{message:"為必填欄位"},length:{minimum:6,message:"至少六個字元"}}},n=document.querySelectorAll("input[type=email],input[type=password]"),t=m.validate(e,o);n.forEach(l=>{l.nextElementSibling.textContent=""}),t?Object.keys(t).forEach(r=>{document.querySelector(`#${r}`).textContent=t[r]}):g()}function g(){c.post(`${i}/login`,{email:a.value,password:s.value}).then(e=>{const o=e.data.user.petName,n=e.data.accessToken,t=e.data.user.id;localStorage.setItem("token",n),localStorage.setItem("userId",t),localStorage.setItem("petName",o),a.value="",s.value="",window.location.href="passport.html"}).catch(e=>{u.fire({icon:"error",title:"登入失敗!",text:"請確認您的登入資訊",footer:'<a href="signup.html">尚未註冊?</a>'}),a.value="",s.value=""})}
