import{S as c}from"./bootstrap.min-639fdbae.js";import{a as i,b as u}from"./axios-4008c28b.js";import{a as m}from"./validate-dbd401d9.js";const n=document.querySelector("#login-email"),l=document.querySelector("#login-password"),g=document.querySelector("#btn-login");g.addEventListener("click",function(e){e.preventDefault(),p()});function p(){const e=document.querySelector("#login-form"),t={帳號:{presence:{message:"為必填欄位"},email:{message:"格式錯誤"}},密碼:{presence:{message:"為必填欄位"},length:{minimum:6,message:"至少六個字元"}}},r=document.querySelectorAll("input[type=email],input[type=password]"),o=m.validate(e,t);r.forEach(a=>{a.nextElementSibling.textContent=""}),o?Object.keys(o).forEach(s=>{document.querySelector(`#${s}`).textContent=o[s]}):d()}function d(){i.post(`${u}/login`,{email:n.value,password:l.value}).then(e=>{const t=e.data.accessToken;localStorage.setItem("token",t),n.value="",l.value="",window.location.href="index.html"}).catch(e=>{c.fire({icon:"error",title:"登入失敗!",text:"請確認您的登入資訊",footer:'<a href="signup.html">尚未註冊?</a>'}),n.value="",l.value=""})}
